# ЁЯЫбя╕П Prisma model relations and enums

ржПржЗ ржЧрж╛ржЗржбрзЗ Prisma-рждрзЗ **Enums** ржПржмржВ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржмрж┐ржнрж┐ржирзНржи **Relations** (рж╕ржорзНржкрж░рзНржХ) рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛ ржмрзНржпрж╛ржЦрзНржпрж╛рж╕рж╣ ржЖрж▓рзЛржЪржирж╛ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

---

## ЁЯПЧя╕П рзз. ENUM DEFINITIONS (ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржорж╛ржирзЗрж░ рждрж╛рж▓рж┐ржХрж╛)

**Enum** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржпржЦржи ржХрзЛржирзЛ ржлрж┐рж▓рзНржбрзЗрж░ ржорж╛ржи ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рждрж╛рж▓рж┐ржХрж╛рж░ ржмрж╛ржЗрж░рзЗ рж╣рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред ржПржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж▓рзЗржнрзЗрж▓рзЗ ржЯрж╛ржЗржк-рж╕рзЗржлржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗред

```prisma
enum Role {
  Admin
  Customer
  Manager
}

enum Status {
  Active
  Inactive
  Pending
}

model User {
  id     Int    @id @default(autoincrement())
  role   Role   @default(Customer) // ржбрж┐ржлрж▓рзНржЯ ржорж╛ржи Customer
  status Status @default(Pending)
}

```

> **ржмрзНржпрж╛ржЦрзНржпрж╛:** ржПржЦрж╛ржирзЗ `role` ржлрж┐рж▓рзНржбрзЗ Admin, Customer ржмрж╛ Manager ржЫрж╛рзЬрж╛ ржЕржирзНржп ржХрж┐ржЫрзБ рж╕рзЗржн ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред

---

## ЁЯФЧ рзи. PRISMA RELATIONS (ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕ржорзНржкрж░рзНржХ)

Prisma-рждрзЗ ржкрзНрж░ржзрж╛ржиржд рзй ржзрж░ржирзЗрж░ рж░рж┐рж▓рзЗрж╢ржи ржжрзЗржЦрж╛ ржпрж╛рзЯред

### 1я╕ПтГг One-to-One (рзз тЖТ рзз)

**ржХржирж╕рзЗржкрзНржЯ:** ржПржХржЯрж┐ рж░рзЗржХрж░рзНржбрзЗрж░ ржмрж┐ржкрж░рзАрждрзЗ ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗ ржарж┐ржХ ржПржХржЯрж┐ рж░рзЗржХрж░рзНржбржЗ ржерж╛ржХржмрзЗред

- **ржЙржжрж╛рж╣рж░ржг:** ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ ржарж┐ржХ ржПржХржЯрж┐ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржерж╛ржХржмрзЗред

```prisma
model User {
  id      Int      @id @default(autoincrement())
  email   String   @unique
  profile Profile? // ржЗржЙржЬрж╛рж░рзЗрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржерж╛ржХрждрзЗржУ ржкрж╛рж░рзЗ ржирж╛ржУ ржкрж╛рж░рзЗ
}

model Profile {
  id     Int    @id @default(autoincrement())
  bio    String?
  userId Int    @unique // Foreign Key + @unique ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ рзз:рзз рж╕ржорзНржкрж░рзНржХ
  user   User   @relation(fields: [userId], references: [id])
}

```

---

### 2я╕ПтГг One-to-Many (рзз тЖТ Many)

**ржХржирж╕рзЗржкрзНржЯ:** ржПржХржЯрж┐ рж░рзЗржХрж░рзНржбрзЗрж░ ржмрж┐ржкрж░рзАрждрзЗ ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗ ржЕржирзЗржХржЧрзБрж▓рзЛ рж░рзЗржХрж░рзНржб ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

- **ржЙржжрж╛рж╣рж░ржг:** ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ ржЕржирзЗржХржЧрзБрж▓рзЛ ржкрзЛрж╕рзНржЯ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ ржкрзНрж░рждрж┐ржЯрж┐ ржкрзЛрж╕рзНржЯрзЗрж░ рж▓рзЗржЦржХ ржПржХржЬржиржЗред

```prisma
model User {
  id    Int    @id @default(autoincrement())
  posts Post[] // ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ ржЕржирзЗржХ ржкрзЛрж╕рзНржЯ (Array)
}

model Post {
  id       Int    @id @default(autoincrement())
  title    String
  userId   Int    // Foreign Key рж╕ржмрж╕ржорзЯ 'Many' ржкрж╛рж╢рзЗ ржерж╛ржХрзЗ
  author   User   @relation(fields: [userId], references: [id])
}

```

---

### 3я╕ПтГг Many-to-Many (Many тЖТ Many)

**ржХржирж╕рзЗржкрзНржЯ:** ржЙржнрзЯ ржкрж╛рж╢рзЗрж░ ржЕржирзЗржХ рж░рзЗржХрж░рзНржб ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд рж╣рждрзЗ ржкрж╛рж░рзЗред

- **ржЙржжрж╛рж╣рж░ржг:** ржПржХржЬржи ржЫрж╛рждрзНрж░ ржЕржирзЗржХржЧрзБрж▓рзЛ ржХрзЛрж░рзНрж╕рзЗ ржнрж░рзНрждрж┐ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржЖржмрж╛рж░ ржПржХржЯрж┐ ржХрзЛрж░рзНрж╕рзЗ ржЕржирзЗржХ ржЫрж╛рждрзНрж░ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

#### A) Implicit Many-to-Many (рж╕рж╣ржЬ ржкржжрзНржзрждрж┐)

Prisma ржирж┐ржЬрзЗ ржерзЗржХрзЗржЗ ржПржХржЯрж┐ рж▓рзБржХрж╛ржирзЛ 'Junction Table' рждрзИрж░рж┐ ржХрж░рзЗ ржирзЗрзЯред

```prisma
model Student {
  id      Int      @id @default(autoincrement())
  courses Course[]
}

model Course {
  id       Int       @id @default(autoincrement())
  students Student[]
}

```

#### B) Explicit Many-to-Many (ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб ржкржжрзНржзрждрж┐)

ржпржЦржи Junction ржЯрзЗржмрж┐рж▓рзЗ ржмрж╛рзЬрждрж┐ рждржерзНржп (ржпрзЗржоржи: ржнрж░рзНрждрж┐рж░ рждрж╛рж░рж┐ржЦ) рж╕рзЗржн ржХрж░рждрзЗ рж╣рзЯред

```prisma
model Enrollment {
  studentId Int
  courseId  Int
  createdAt DateTime @default(now()) // ржмрж╛рзЬрждрж┐ ржХрж▓рж╛ржо

  student Student @relation(fields: [studentId], references: [id])
  course  Course  @relation(fields: [courseId], references: [id])

  @@id([studentId, courseId]) // ржХржорзНржкрзЛржЬрж┐ржЯ ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрж┐
}

```

---

## ЁЯУК Quick Summary Table

| рж░рж┐рж▓рзЗрж╢ржи ржЯрж╛ржЗржк      | Foreign Key ржЕржмрж╕рзНржерж╛ржи            | ржорзВрж▓ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп                               |
| ---------------- | ------------------------------ | ------------------------------------------- |
| **One-to-One**   | ржпрзЗржХрзЛржирзЛ ржПржХ ржкрж╛рж╢рзЗ                 | FK ржлрж┐рж▓рзНржбржЯрж┐ ржЕржмрж╢рзНржпржЗ `@unique` рж╣рждрзЗ рж╣ржмрзЗред        |
| **One-to-Many**  | 'Many' ржкрж╛рж╢рзЗ (ржпрзЗржоржи: Post ржЯрзЗржмрж┐рж▓) | ржПржХ ржкрж╛рж╢рзЗ Single Object, ржЕржирзНржп ржкрж╛рж╢рзЗ Array `[]` |
| **Many-to-Many** | Junction ржЯрзЗржмрж┐рж▓рзЗ                | ржжрзБржЗ ржкрж╛рж╢рзЗржЗ Array `[]` ржерж╛ржХрзЗред                  |

---

### ЁЯУЭ ржирзЛржЯ:

- **PK (Primary Key):** ржЯрзЗржмрж┐рж▓рзЗрж░ ржЗржЙржирж┐ржХ ржЖржЗржбрзЗржирзНржЯрж┐ржлрж╛рзЯрж╛рж░ред
- **FK (Foreign Key):** ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛ржерзЗ рж▓рж┐ржВржХ ржХрж░рж╛рж░ ржЖржЗржбрж┐ред
- **@relation:** ржПржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржХрзЛржирзЛ ржХрж▓рж╛ржо рждрзИрж░рж┐ ржХрж░рзЗ ржирж╛, рж╢рзБржзрзБ Prisma-ржХрзЗ рж▓ржЬрж┐ржХ ржмрзЛржЭрж╛рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред

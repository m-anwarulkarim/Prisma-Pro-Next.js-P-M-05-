// prisma-example.ts
// Prisma ORM Example with Bangla explanation

import { PrismaClient } from "@prisma/client";

// Prisma Client ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ
const prisma = new PrismaClient();

// main() ржлрж╛ржВрж╢ржи: ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ create, update ржЗрждрзНржпрж╛ржжрж┐ ржХрж╛ржЬ ржХрж░ржм
async function main() {
  // ========================
  // 1я╕ПтГг ржирждрзБржи ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐ ржХрж░рж╛
  // ========================
  const newUser = await prisma.user.create({
    data: {
      name: "Anwarul",
      email: "anwarul@example.com",
      age: 25,
    },
  });

  console.log("тЬЕ ржирждрзБржи ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗ:", newUser);

  // ========================
  // 2я╕ПтГг ржирждрзБржи ржкрзЛрж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛
  // ========================
  const newPost = await prisma.post.create({
    data: {
      title: "Prisma рж╢рзЗржЦрж╛",
      content: "ржЖржЬ ржЖржорж┐ Prisma ORM ржП create рж╢рж┐ржЦрж▓рж╛ржо!",
      published: true,
      authorId: newUser.id, // relation ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ
    },
  });

  console.log("ЁЯУЭ ржирждрзБржи ржкрзЛрж╕рзНржЯ рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗ:", newPost);
}

// ========================
// main() рж░рж╛ржи + error handling + cleanup
// ========================
main()
  .catch((e) => {
    // ржпржжрж┐ ржХрзЛржирзЛ error ржШржЯрзЗ, ржПржЦрж╛ржирзЗ ржзрж░рж╛ рж╣ржмрзЗ
    console.error(" Error ржШржЯрзЗржЫрзЗ:", e);
  })
  .finally(async () => {
    // рж╕ржмрж╕ржорзЯ Prisma Client disconnect ржХрж░рж╛ рж╣ржмрзЗ, connection leak рж╣ржмрзЗ ржирж╛
    await prisma.$disconnect();
    console.log("ЁЯФМ Prisma ржХрж╛ржирзЗржХрж╢ржи ржмржирзНржз ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ");
  });

/* ---------------------------------------------------
ЁЯзй рж╕ржВржХрзНрж╖рзЗржкрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛:

1. main(): ржорзВрж▓ ржХрж╛ржЬ рж╢рзБрж░рзБ рж╣рзЯ ржПржЦрж╛ржирзЗ (ржпрзЗржоржи create ржЗржЙржЬрж╛рж░/ржкрзЛрж╕рзНржЯ)
2. .catch(): ржпржжрж┐ ржХрзЛржирзЛ error ржШржЯрзЗ, ржПржЯрж┐ handle ржХрж░рзЗ
3. .finally(): cleanup ржХрж╛ржЬ рж╕ржмрж╕ржорзЯ ржХрж░рзЗ, ржпрзЗржоржи Prisma Client disconnect ржХрж░рж╛
--------------------------------------------------- */

## üîÑ Prisma: Updating & Deleting Records (Step-by-Step Guide)

Prisma-‡¶§‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶¨‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡¶§ ‡¶ö‡¶æ‡¶∞‡¶ü‡¶ø ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡ßü: `update`, `updateMany`, `delete`, ‡¶è‡¶¨‡¶Ç `deleteMany`‡•§

---

### 1Ô∏è‚É£ Updating Records (‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ)

#### A) Single Record Update (`update`)

‡¶Ø‡¶ñ‡¶® ‡¶Ü‡¶™‡¶®‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° (‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ID ‡¶¶‡¶ø‡ßü‡ßá) ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®‡•§

> **‡¶∂‡¶∞‡ßç‡¶§:** `where` ‡¶ï‡ßç‡¶≤‡¶ú-‡¶è ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶è‡¶ï‡¶ü‡¶ø **Unique** ‡¶´‡¶ø‡¶≤‡ßç‡¶° (‡¶Ø‡ßá‡¶Æ‡¶®: ID ‡¶¨‡¶æ Email) ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§

```typescript
const updatedUser = await prisma.user.update({
  where: { id: 1 }, // ‡¶á‡¶â‡¶®‡¶ø‡¶ï ‡¶Ü‡¶á‡¶°‡ßá‡¶®‡ßç‡¶ü‡¶ø‡¶´‡¶æ‡ßü‡¶æ‡¶∞
  data: {
    name: "Anwarul Islam", // ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ
  },
});
```

#### B) Multiple Records Update (`updateMany`)

‡¶Ø‡¶ñ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∂‡¶∞‡ßç‡¶§‡ßá‡¶∞ ‡¶ì‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶®‡ßá‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü‡•§ ‡¶è‡¶ü‡¶ø ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶è‡¶ï‡¶ü‡¶ø `count` ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶¶‡ßá‡ßü‡•§

```typescript
const updateResult = await prisma.user.updateMany({
  where: {
    email: { contains: "@oldcorp.com" },
  },
  data: {
    role: "Admin",
  },
});
console.log(`${updateResult.count} ‡¶ü‡¶ø ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§`);
```

---

### 2Ô∏è‚É£ Deleting Records (‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ)

#### A) Single Record Delete (`delete`)

‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§ ‡¶è‡¶ü‡¶ø ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°‡¶ü‡¶ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶®‡¶æ ‡¶™‡ßá‡¶≤‡ßá **Error** ‡¶•‡ßç‡¶∞‡ßã ‡¶ï‡¶∞‡¶¨‡ßá‡•§

```typescript
const deletedUser = await prisma.user.delete({
  where: { email: "test@example.com" },
});
```

#### B) Multiple Records Delete (`deleteMany`)

‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§ ‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡¶æ ‡¶™‡¶æ‡ßü, ‡¶§‡¶¨‡ßá ‡¶è‡¶ü‡¶ø ‡¶è‡¶∞‡¶∞ ‡¶¶‡ßá‡ßü ‡¶®‡¶æ ‡¶¨‡¶∞‡¶Ç `count: 0` ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ï‡¶∞‡ßá‡•§

```typescript
const deleteResult = await prisma.user.deleteMany({
  where: {
    isActive: false, // ‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶á‡¶®‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶¨‡¶æ‡¶á‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá
  },
});
```

---

### üìä ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‡¶ì ‡¶Ü‡¶ö‡¶∞‡¶£ (At a Glance)

| ‡¶Æ‡ßá‡¶•‡¶°             | ‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü       | ‡¶∂‡¶∞‡ßç‡¶§ (Where)             | ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡¶æ ‡¶™‡ßá‡¶≤‡ßá ‡¶ï‡ßÄ ‡¶π‡¶¨‡ßá? |
| ---------------- | ------------- | ------------------------ | ---------------------- |
| **`update`**     | ‡ßß‡¶ü‡¶ø ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°    | ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á Unique ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá    | ‚ùå **Error ‡¶¶‡¶ø‡¶¨‡ßá**      |
| **`updateMany`** | ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° | ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∂‡¶∞‡ßç‡¶§ (Non-unique) | ‚úÖ `count: 0` ‡¶¶‡¶ø‡¶¨‡ßá     |
| **`delete`**     | ‡ßß‡¶ü‡¶ø ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°    | ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á Unique ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá    | ‚ùå **Error ‡¶¶‡¶ø‡¶¨‡ßá**      |
| **`deleteMany`** | ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° | ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∂‡¶∞‡ßç‡¶§ (Non-unique) | ‚úÖ `count: 0` ‡¶¶‡¶ø‡¶¨‡ßá     |

---

### üí° ‡¶™‡ßç‡¶∞‡ßã-‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶ü‡¶ø‡¶™‡¶∏ (Pro-Tips)

#### ‡ßß. Upsert (Update or Insert)

‡¶ï‡¶ñ‡¶®‡ßã ‡¶è‡¶Æ‡¶® ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶π‡ßü ‡¶Ø‡ßá‚Äî‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã, ‡¶Ü‡¶∞ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßã‡•§ ‡¶∏‡ßá‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá `upsert` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®:

```typescript
await prisma.user.upsert({
  where: { email: "abc@test.com" },
  update: { name: "Updated Name" },
  create: { email: "abc@test.com", name: "New User" },
});
```

#### ‡ß®. Atomic Number Operations

‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶® ‡¶¨‡¶æ‡ßú‡¶æ‡¶§‡ßá ‡¶¨‡¶æ ‡¶ï‡¶Æ‡¶æ‡¶§‡ßá (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶¨‡¶æ ‡¶á‡¶®‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∞‡¶ø) `increment` ‡¶¨‡¶æ `decrement` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶:

```typescript
await prisma.user.update({
  where: { id: 1 },
  data: {
    balance: { increment: 500 }, // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡ß´‡ß¶‡ß¶ ‡¶¨‡¶æ‡ßú‡¶¨‡ßá
  },
});
```

#### ‡ß©. Soft Delete (‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶°)

‡¶∞‡¶ø‡ßü‡ßá‡¶≤ ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø `delete` ‡¶ï‡¶∞‡¶ø ‡¶®‡¶æ, ‡¶¨‡¶∞‡¶Ç ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶∞‡¶æ‡¶ñ‡¶ø `isDeleted: true` ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§ ‡¶è‡¶§‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶π‡¶æ‡¶∞‡¶æ‡¶®‡ßã ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡¶Å‡¶ö‡¶æ ‡¶Ø‡¶æ‡ßü‡•§

```typescript
await prisma.user.update({
  where: { id: 1 },
  data: { isDeleted: true }, // ‡¶è‡¶ï‡ßá ‡¶¨‡¶≤‡¶æ ‡¶π‡ßü Soft Delete
});
```

---

### üõ†Ô∏è Execution & Cleanup

‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶™‡ßç‡¶∞‡¶Æ‡¶ø‡¶ú ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®:

```typescript
async function run() {
  try {
    await main();
  } catch (e) {
    console.error("‚ùå ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡ßü‡ßá‡¶õ‡ßá:", e);
  } finally {
    await prisma.$disconnect();
    console.log("üîå ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶°‡•§");
  }
}

run();
```

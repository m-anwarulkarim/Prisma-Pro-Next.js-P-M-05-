# ЁЯУЪ Prisma: Multiple Schema Files Setup (Latest v7.2.0)

Prisma-рждрзЗ ржмржбрж╝ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржПржХржЯрж┐ `schema.prisma` ржлрж╛ржЗрж▓ ржЕржирзЗржХ ржмржбрж╝ рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ред Prisma **v5.15.0 ржерзЗржХрзЗ** ржПржХржЯрж┐ ржЕржлрж┐рж╕рж┐ржпрж╝рж╛рж▓ ржлрж┐ржЪрж╛рж░ ржПржирзЗржЫрзЗ, ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ рж╕рзНржХрж┐ржорж╛ ржлрж╛ржЗрж▓ржХрзЗ ржПржХрж╛ржзрж┐ржХ ржлрж╛ржЗрж▓рзЗ ржнрж╛ржЧ ржХрж░рж╛ ржпрж╛ржпрж╝ред

ржирзАржЪрзЗ **Prisma 7.2.0 ржЕржирзБржпрж╛ржпрж╝рзА Multi-file Schema setup** ржПрж░ рж╕ржорзНржкрзВрж░рзНржг ржзрж╛ржк ржжрзЗржУржпрж╝рж╛ рж╣рж▓рзЛ:

---

### рззя╕ПтГг Preview ржлрж┐ржЪрж╛рж░ ржПржирж╛ржмрж▓ ржХрж░рж╛

ржПржЗ ржлрж┐ржЪрж╛рж░ржЯрж┐ ржмрж░рзНрждржорж╛ржирзЗ `prismaSchemaFolder` preview feature ржПрж░ ржЖржУрждрж╛ржпрж╝ ржЖржЫрзЗред
ржЖржкржирж╛рж░ **ржорзВрж▓ schema ржлрж╛ржЗрж▓**-ржП generator рж╕рзЗржХрж╢ржирзЗ ржПржЯрж┐ ржпрзЛржЧ ржХрж░рзБржи:

```prisma
// prisma/schema/schema.prisma

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["prismaSchemaFolder"]
}

datasource db {
  provider = "postgresql" // ржЕржержмрж╛ ржЖржкржирж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ DB
  url      = env("DATABASE_URL")
}
```

> тЪая╕П ржоржирзЗ рж░рж╛ржЦржмрзЗржи: рж╢рзБржзрзБржорж╛рждрзНрж░ main file-ржП `generator` ржПржмржВ `datasource` ржерж╛ржХрждрзЗ рж╣ржмрзЗред
> ржЕржирзНржп model/enums ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛрждрзЗ ржПржЗржЧрзБрж▓рзЛ ржерж╛ржХржмрзЗ ржирж╛ред

---

### рзия╕ПтГг ржлрзЛрж▓рзНржбрж╛рж░ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ рждрзИрж░рж┐ ржХрж░рж╛

ржкрзНрж░ржерж╛ржЧрждржнрж╛ржмрзЗ `prisma/schema.prisma` ржерж╛ржХрждрзЛред ржПржЦржи ржЖржорж░рж╛ `prisma/schema/` ржлрзЛрж▓рзНржбрж╛рж░ рждрзИрж░рж┐ ржХрж░рж┐ ржПржмржВ рж╕ржм `.prisma` ржлрж╛ржЗрж▓ рж╕рзЗржЦрж╛ржирзЗ рж░рж╛ржЦрж┐ред

**Recommended Structure:**

```text
prisma/
тФЬтФАтФА schema/
тФВ   тФЬтФАтФА schema.prisma        # Main file тАФ generator & datasource
тФВ   тФЬтФАтФА models/
тФВ   тФВ   тФЬтФАтФА user.prisma
тФВ   тФВ   тФЬтФАтФА post.prisma
тФВ   тФВ   тФФтФАтФА comment.prisma
тФВ   тФЬтФАтФА enums/
тФВ   тФВ   тФФтФАтФА commonEnums.prisma
тФВ   тФФтФАтФА helpers/            # optional, ржпрзЗржоржи views ржмрж╛ reusable parts
```

> ржПржЦржи CLI ржПржЗ folder ржХрзЗ recognize ржХрж░рзЗ рж╕ржм `.prisma` ржлрж╛ржЗрж▓ ржПржХрждрзНрж░рзЗ compile ржХрж░ржмрзЗред

---

### рзйя╕ПтГг Models ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛

ржЖржкржирж┐ ржПржЦржи ржоржбрзЗрж▓ржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржлрж╛ржЗрж▓рзЗ рж▓рж┐ржЦрждрзЗ ржкрж╛рж░рзЗржи:

**user.prisma**

```prisma
model User {
  id    Int     @id @default(autoincrement())
  email String  @unique
  posts Post[]
}
```

**post.prisma**

```prisma
model Post {
  id        Int     @id @default(autoincrement())
  title     String
  author    User    @relation(fields: [authorId], references: [id])
  authorId  Int
}
```

> ЁЯФ╣ ржоржбрзЗрж▓ржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ ржлрж╛ржЗрж▓рзЗ ржерж╛ржХрж▓рзЗржУ **relation ржарж┐ржХржЗ ржХрж╛ржЬ ржХрж░ржмрзЗ**, ржХрж╛рж░ржг Prisma рж╕ржм ржлрж╛ржЗрж▓ржХрзЗ ржПржХрждрзНрж░рзЗ combine ржХрж░рзЗред

---

### рзкя╕ПтГг Prisma CLI ржмрзНржпржмрж╣рж╛рж░

Multi-file setup-ржПржУ **рж╕рж╛ржзрж╛рж░ржг CLI commands** ржПржХржЗржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝, рждржмрзЗ schema folder ржХрзЗ point ржХрж░рждрзЗ рж╣ржмрзЗред

#### ржмрж┐ржХрж▓рзНржк A тАФ CLI flag ржжрж┐рзЯрзЗ

```bash
npx prisma generate --schema ./prisma/schema
npx prisma migrate dev --schema ./prisma/schema
```

#### ржмрж┐ржХрж▓рзНржк B тАФ `package.json` ржП рж╕рзЗржЯ ржХрж░рж╛

```json
{
  "prisma": {
    "schema": "./prisma/schema"
  }
}
```

> CLI рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ рж╕ржм `.prisma` ржлрж╛ржЗрж▓ combine ржХрж░рзЗ ржХрж╛ржЬ ржХрж░рзЗред

---

### рзля╕ПтГг Summary

| ржмрж┐рж╖рзЯ             | ржмрж┐ржмрж░ржг                                          |
| ---------------- | ---------------------------------------------- |
| Feature          | MultiтАСFile Prisma Schema                       |
| Available Since  | v5.15.0 (preview), v6.7.0 (GA)                 |
| Main File        | ржЕржмрж╢рзНржпржЗ `datasource` & `generator` ржерж╛ржХрждрзЗ рж╣ржмрзЗ    |
| Additional Files | Models / enums / helpers                       |
| Configuration    | `--schema` flag / package.json / prisma.config |
| рж╕рзБржмрж┐ржзрж╛           | Better organization & team collaboration       |
| Known Issues     | v7 CLI-рждрзЗ ржХрж┐ржЫрзБ bug report рж╣ржпрж╝рзЗржЫрзЗ               |

---

ЁЯТб **Extra Tips:**

1. рж╕ржм model ржлрж╛ржЗрж▓рзЗрж░ ржоржзрзНржпрзЗ **ржоржбрзЗрж▓ ржирж╛ржо ржУ relation ржарж┐ржХ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ**ред
2. Enums ржЖрж▓рж╛ржжрж╛ ржлрж╛ржЗрж▓рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рж▓рзЗ model ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ ржЖрж░ржУ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржерж╛ржХрзЗред
3. Helpers ржлрзЛрж▓рзНржбрж╛рж░ optional тАФ ржЖржкржирж┐ reusable parts ржмрж╛ views рж░рж╛ржЦрж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред
   </br>
   </br>
   </br>
   </br>
   </br>

# ЁЯФз рж╕рж╛ржзрж╛рж░ржг Prisma CLI Commands

### тЬЕ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХржерж╛ (Multi-File Schema) рждрзЗ

- CLI command **ржПржХржЗ ржерж╛ржХрзЗ**
- рж╢рзБржзрзБ ржкрж╛рж░рзНржержХрзНржп:

  - `--schema` flag ржжрж┐рзЯрзЗ **schema folder** ржжрзЗржЦрж╛рждрзЗ рж╣рзЯ
  - ржЕржержмрж╛ `package.json`-ржП ржПржХржмрж╛рж░ рж╕рзЗржЯ ржХрж░рж▓рзЗржЗ рж╣ржмрзЗ

```json
{
  "prisma": {
    "schema": "./prisma/schema"
  }
}
```

ржПрж░ржкрж░ ржЖрж░ `--schema` рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗ ржирж╛ ЁЯОЙ

### 1я╕ПтГг Prisma Client Generate

ЁЯСЙ Prisma schema ржерзЗржХрзЗ client рждрзИрж░рж┐ ржХрж░рзЗ

```bash
npx prisma generate
```

ЁЯУМ Multi-file рж╣рж▓рзЗ:

```bash
npx prisma generate --schema ./prisma/schema
```

---

### 2я╕ПтГг Database Migration (Development)

ЁЯСЙ ржирждрзБржи migration рждрзИрж░рж┐ + DB update

```bash
npx prisma migrate dev
```

ЁЯУМ Multi-file рж╣рж▓рзЗ:

```bash
npx prisma migrate dev --schema ./prisma/schema
```

---

### 3я╕ПтГг Existing DB ржерзЗржХрзЗ Schema рждрзИрж░рж┐ (Introspection)

ЁЯСЙ ржЖржЧрзЗрж░ database ржерзЗржХрзЗ Prisma schema ржмрж╛ржирж╛ржпрж╝

```bash
npx prisma db pull
```

ЁЯУМ Multi-file рж╣рж▓рзЗ:

```bash
npx prisma db pull --schema ./prisma/schema
```

---

### 4я╕ПтГг Prisma Studio (GUI)

ЁЯСЙ Browser-based DB viewer

```bash
npx prisma studio
```

ЁЯУМ Multi-file рж╣рж▓рзЗ:

```bash
npx prisma studio --schema ./prisma/schema
```

---

### 5я╕ПтГг Database Reset (Dev Only тЪая╕П)

ЁЯСЙ рж╕ржм data delete ржХрж░рзЗ ржирждрзБржи ржХрж░рзЗ migrate ржЪрж╛рж▓рж╛ржпрж╝

```bash
npx prisma migrate reset
```

ЁЯУМ Multi-file рж╣рж▓рзЗ:

```bash
npx prisma migrate reset --schema ./prisma/schema
```

---

### 6я╕ПтГг Migration Deploy (Production)

ЁЯСЙ Production-ржП existing migrations apply ржХрж░рзЗ

```bash
npx prisma migrate deploy
```

ЁЯУМ Multi-file рж╣рж▓рзЗ:

```bash
npx prisma migrate deploy --schema ./prisma/schema
```

---

### 7я╕ПтГг Schema Validation

ЁЯСЙ schema-рждрзЗ error ржЖржЫрзЗ ржХрж┐ржирж╛ check ржХрж░рзЗ

```bash
npx prisma validate
```

ЁЯУМ Multi-file рж╣рж▓рзЗ:

```bash
npx prisma validate --schema ./prisma/schema
```

---

## ЁЯза рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп

| Command          | ржХрж╛ржЬ                   |
| ---------------- | --------------------- |
| `generate`       | Prisma Client ржмрж╛ржирж╛ржпрж╝  |
| `migrate dev`    | Migration + DB update |
| `db pull`        | DB тЖТ Schema           |
| `studio`         | GUI DB viewer         |
| `migrate reset`  | Dev reset             |
| `migrate deploy` | Prod migration        |
| `validate`       | Schema check          |

---

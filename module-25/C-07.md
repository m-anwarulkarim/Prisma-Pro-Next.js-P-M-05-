## ЁЯФН Filtering Posts by Status and Author ID

ржмрж╛рж╕рзНрждржм ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж╛рзЯржЗ ржкрзНрж░рзЯрзЛржЬржи рж╣рзЯ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржЙржЬрж╛рж░рзЗрж░ (Author ID) ржкрзЛрж╕рзНржЯ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рж╛ ржПржмржВ рж╕рзЗржЧрзБрж▓рзЛрж░ ржкрж╛ржмрж▓рж┐рж╢ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ (Boolean) ржЪрзЗржХ ржХрж░рж╛ред Prisma-рждрзЗ ржПржЯрж┐ ржХрж░рж╛ ржЦрзБржмржЗ рж╕рж╣ржЬред

### ЁЯЫая╕П ржХрзЛржб ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯрзЗрж╢ржи

ржирж┐ржЪрзЗрж░ ржлрж╛ржВрж╢ржиржЯрж┐ ржЗржЙржЬрж╛рж░ ржЖржЗржбрж┐ ржПржмржВ ржкрж╛ржмрж▓рж┐рж╢ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЕржирзБржпрж╛рзЯрзА ржбрж╛ржЗржирж╛ржорж┐ржХ ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ ржХрж░ржмрзЗ:

```ts
import { PrismaClient } from "@prisma/client";
import { Request, Response } from "express";

const prisma = new PrismaClient();

export const getPostsByStatusAndAuthor = async (
  req: Request,
  res: Response
) => {
  try {
    // рзз. ржХрзБржпрж╝рзЗрж░рж┐ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржерзЗржХрзЗ ржбрж╛ржЯрж╛ ржирзЗржУржпрж╝рж╛
    const authorId = req.query.authorId
      ? Number(req.query.authorId)
      : undefined;
    const isPublished = req.query.published; // ржПржЯрж┐ "true" ржЕржержмрж╛ "false" (String) рж╣рж┐рж╕рзЗржмрзЗ ржЖрж╕рзЗ

    // рзи. Prisma findMany ржПрж░ ржорж╛ржзрзНржпржорзЗ ржбрж╛ржЗржирж╛ржорж┐ржХ ржлрж┐рж▓рзНржЯрж╛рж░
    const posts = await prisma.post.findMany({
      where: {
        AND: [
          // ржХржирзНржбрж┐рж╢ржи рзз: ржпржжрж┐ authorId ржерж╛ржХрзЗ рждржмрзЗржЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рзЛ
          authorId ? { authorId: authorId } : {},

          // ржХржирзНржбрж┐рж╢ржи рзи: Boolean ржлрж┐рж▓рзНржЯрж╛рж░ (String to Boolean рж░рзВржкрж╛ржирзНрждрж░)
          ...(isPublished !== undefined && {
            published: isPublished === "true",
          }),
        ],
      },
      orderBy: { createdAt: "desc" },
    });

    return res.status(200).json({
      success: true,
      total: posts.length,
      data: posts,
    });
  } catch (error) {
    return res.status(500).json({ success: false, message: "Error", error });
  }
};
```

---

### ЁЯза ржорзВрж▓ ржХржирж╕рзЗржкрзНржЯрж╕ржорзВрж╣ (Key Concepts)

#### рзз. Number Conversion (Author ID)

URL ржерзЗржХрзЗ ржЖрж╕рж╛ рж╕ржм ржбрзЗржЯрж╛ String ржерж╛ржХрзЗред ржХрж┐ржирзНрждрзБ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ID ржпржжрж┐ Integer рж╣рзЯ, рждржмрзЗ рждрж╛ржХрзЗ ржЕржмрж╢рзНржпржЗ `Number()` ржжрж┐рзЯрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рждрзЗ рж╣ржмрзЗред

- **URL:** `?authorId=10` `Number("10")` `10` (Integer)

#### рзи. Boolean Conversion (Status)

Boolean ржлрж┐рж▓рзНржбрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ рж╕рж░рж╛рж╕рж░рж┐ String (`"true"`) ржкрж╛ржарж╛ржирзЛ ржпрж╛ржмрзЗ ржирж╛ред

- **рж╕ржарж┐ржХ ржирж┐рзЯржо:** `published: isPublished === "true"`
- ржПржЯрж┐ ржЪрзЗржХ ржХрж░рзЗ ржпрзЗ рж╕рзНржЯрзНрж░рж┐ржВржЯрж┐ "true" ржХрж┐ ржирж╛; ржорж┐рж▓рж▓рзЗ рж░рзЗржЬрж╛рж▓рзНржЯ рж╣ржмрзЗ `true` (Boolean), ржирж╛ ржорж┐рж▓рж▓рзЗ `false`ред

#### рзй. ржбрж╛ржЗржирж╛ржорж┐ржХ 'undefined' рж╣рзНржпрж╛ржирзНржбрзЗрж▓рж┐ржВ

ржпржжрж┐ ржЗржЙржЬрж╛рж░ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржирж╛ ржкрж╛ржарж╛рзЯ (ржпрзЗржоржи рж╢рзБржзрзБ `/posts`), рждржмрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ржЯрж┐ ржпрзЗржи ржХрж╛ржЬ ржирж╛ ржХрж░рзЗ (ржпрж╛рждрзЗ рж╕ржм ржбрж╛ржЯрж╛ ржЖрж╕рзЗ)ред ржПрж░ ржЬржирзНржп ржЖржорж░рж╛ **Spread Operator (`...`)** ржЕржержмрж╛ **Ternary Operator** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред

---

### ЁЯУК ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг (Use Cases)

| URL Input                       | рж▓ржЬрж┐ржХ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛                       | рж░рзЗржЬрж╛рж▓рзНржЯ                            |
| ------------------------------- | ------------------------------------ | ---------------------------------- |
| `?authorId=5&published=true`    | Author ID: 5 AND Published: true     | ржЖржЗржбрж┐ рзл ржПрж░ рж╕ржм ржкрж╛ржмрж▓рж┐рж╢ржб ржкрзЛрж╕рзНржЯред        |
| `?published=false`              | Author ID: skip AND Published: false | рж╕ржм ржЗржЙржЬрж╛рж░рзЗрж░ ржбрзНрж░рж╛ржлржЯ/ржЖржиржкрж╛ржмрж▓рж┐рж╢ржб ржкрзЛрж╕рзНржЯред |
| `/posts` (ржХрзЛржирзЛ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржирзЗржЗ) | All Conditions Skip                  | ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕ржм ржкрзЛрж╕рзНржЯред                |

---

### ЁЯТб ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржоржирзЗ рж░рж╛ржЦрзБржи (Self-Note)

- **ржмрзБрж▓рж┐рзЯрж╛ржи рж░рзВржкрж╛ржирзНрждрж░:** рж╕рж░рж╛рж╕рж░рж┐ `Boolean(req.query.published)` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи ржирж╛ред ржХрж╛рж░ржг ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯрзЗ `"false"` (рж╕рзНржЯрзНрж░рж┐ржВ) ржХрзЗ ржмрзБрж▓рж┐рзЯрж╛ржи ржХрж░рж▓рзЗ рждрж╛ `true` рж╣рзЯрзЗ ржпрж╛рзЯред рж╕ржм рж╕ржорзЯ `isPublished === "true"` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
- **ржЯрж╛ржЗржк рж╕рзЗржлржЯрж┐:** Prisma Schema-рждрзЗ ржЖржкржирж╛рж░ ржлрж┐рж▓рзНржбрзЗрж░ ржЯрж╛ржЗржк ржпрж╛ (Int, Boolean, String), ржХрзБрзЯрзЗрж░рж┐ ржкрж╛ржарж╛ржирзЛрж░ рж╕ржорзЯ ржбрзЗржЯрж╛ рж╕рзЗржЗ ржЯрж╛ржЗржкрзЗржЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗ ржирж┐рждрзЗ рж╣ржмрзЗред

---

### тЬЕ ржХрзЗржи ржПржЗ ржкржжрзНржзрждрж┐ржЯрж┐ рж╕рзЗрж░рж╛?

рзз. **Error Prevention:** ржнрзБрж▓ ржбрзЗржЯрж╛ ржЯрж╛ржЗржк ржкрж╛ржарж╛ржирзЛрж░ ржХрж╛рж░ржгрзЗ Prisma ржПрж░рж░ ржжрж┐ржмрзЗ ржирж╛ред
рзи. **Flexibility:** ржЗржЙржЬрж╛рж░ ржЪрж╛ржЗрж▓рзЗ рж╢рзБржзрзБ рж▓рзЗржЦржХ ржжрж┐рзЯрзЗ, рж╢рзБржзрзБ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржжрж┐рзЯрзЗ, ржЕржержмрж╛ ржжрзБржЯрзЛ ржжрж┐рзЯрзЗржЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред
рзй. **Performance:** ржбрж╛ржЯрж╛ржмрзЗрж╕ рж▓рзЗржнрзЗрж▓рзЗ `AND` ржХржирзНржбрж┐рж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржлрж▓рзЗ рж░рзЗржЬрж╛рж▓рзНржЯ ржЦрзБржм ржжрзНрж░рзБржд ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯред
